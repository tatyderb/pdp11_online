# Список команд PDP-11

lesson = 318783

## SKIP VIDEO Видео

https://youtu.be/dWSFnRWXZuU

## Набор команд PDP-11

[Список команд PDP-11](https://stepik.org/lesson/347539/step/1)

Построен так же, как система команд игрушечного автомобиля. Заданы:

* Мнемоники команды, указаны её аргументы
    * можно писать как маленькими, так и большими буквами и команды, и аргументы.
    * `s` (source) - источник, откуда читаем; `d` (destination) - цель, куда пишем результат команды.
* Opcode (код операции), как в слове зашифрованы код команды и ее аргументы.
* NZVC - флаги состояния процессора. О них поговорим позже, пока игнорируем этот столбец.
* Описание команды.
* Комментарии по работе команды.

Разберем как зашифрованы команды в таблице.

Посмотрим в условные обозначения. 

В коде операции

* SS и DD - аргументы длиной каждый по 6 бит
* B - 0 или 1, 1 бит

| Мнемоника | Opcode | NZVC | Описание | Комментарии |
|-----|----|----|----|----|
| HALT | *000000* | `----` | Halt | |
| ADD s, d | **06**SSDD | `****` | Add | d = s + d |
| MOVb s,d    | B1SSDD   | `**0-`   | Move                         | d=s          | 
| INCb d      | B052DD   | `***-`   | Increment                    | d=d+1        | 

### Как описаны коды операций в столбце Opcode, команда ADD

Команда ADD описана как **06**SSDD, про SS и DD мы знаем пока только то, что длина каждого аргумента 6 бит. Все слово 16 бит. То есть на код операции осталось 16 - 6 - 6 = 4 бита. Эти 4 старших бита закодированы **восьмеричными** цифрами 06 или бинарными 0110. 

16 бит слова с командой ADD, биты отвечающие за аргументы обозначены как `s` и `d`.

```
|15            8|7             0| - номера бит
|0|1|1|0|s|s|s|s|s|s|d|d|d|d|d|d| - содержимое бит, бинарные числа
|0|  6  |  S  |  S  |  D  |  D  | - содержимое бит, восьмеричные числа
```

### Команда MOV

| Мнемоника | Opcode | NZVC | Описание | Комментарии |
|-----|----|----|----|----|
| MOVb s,d    | B1SSDD   | `**0-`   | Move                         | d=s          | 

В записи мнемоники `MOVb s,d` означает, что у нас две разных команды. `MOV` и `MOVB` (вариант команды, который работает не со словами, а с байтами, о нем подробнее разберем позже). 

У них разные коды операций, `B` в коде операций означает 0 для команды `MOV` и 1 для команды `MOVB`. То есть выше краткая запись для двух разных команд. Развернуто: 

| Мнемоника | Opcode | NZVC | Описание | Комментарии |
|-----|----|----|----|----|
| MOV s,d    | **01**SSDD   | `**0-`   | Move                         | d=s          | 
| MOVB s,d    | **11**SSDD   | `**0-`   | Move (byte)                         | d=s          | 

`MOV` - самая частая команда ассемблера. Её код `01` (первая команда ассемблера).

Проще, чем `MOV`, запомнить только код операции `HALT` - нули во всех битах. 0 - стоп.

16 бит слова с командой `MOV`, биты отвечающие за аргументы обозначены как `s` и `d`.

```
|15            8|7             0| - номера бит
|0|0|0|1|s|s|s|s|s|s|d|d|d|d|d|d| - содержимое бит, бинарные числа
|0|  1  |  S  |  S  |  D  |  D  | - содержимое бит, восьмеричные числа
```

### Команда INC (increment)

Разберем как кодируется команда увеличения (increment) числа на 1. Её нет в первом тесте, но вы должны понимать, что не у всех команд будет обязательно два аргумента.

| Мнемоника | Opcode | NZVC | Описание | Комментарии |
|-----|----|----|----|----|
| INCb d      | B052DD   | `***-`   | Increment                    | d=d+1        | 

Как и в `MOVb` тут зашифровано две команды, `INC` (увеличить значение *слова* на 1) и `INCB` (увеличит значение *байта* на 1). В языке Си вы знаете эту команду как `++` (автоинкремент).

| Мнемоника | Opcode | NZVC | Описание | Комментарии |
|-----|----|----|----|----|
| INC d      | **0052**DD   | `***-`   | Increment                    | d=d+1        | 
| INCB d      | **1052**DD   | `***-`   | Increment                    | d=d+1        | 

В команде только один аргумент DD. 16 бит слова с командой `INC`, биты отвечающие за аргумент обозначены как `d`.

```
|15            8|7             0| - номера бит
|0|0|0|0|1|0|1|0|1|0|d|d|d|d|d|d| - содержимое бит, бинарные числа
|0|  0  |  5  |  2  |  D  |  D  | - содержимое бит, восьмеричные числа
```

Мы разобрались как бинарный код операции записан в таблице восьмеричными цифрами. Пора написать код, который прочитает и разберет код команды.