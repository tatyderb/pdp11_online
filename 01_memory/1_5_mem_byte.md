# Реализация функций при `byte mem[ ]`

lesson = 312214
lang = c

## SKIP VIDEO

https://youtu.be/rfft_CAsjyU

## Запись и чтение байта

**Внимание! Реализуем или вариант `byte mem[MEMSIZE]` или вариант `word mem[MEMSIZE]`. Посылаем свой код в проверяющую систему [здесь](https://stepik.org/lesson/870973)**

Разберем реализацию функций, когда массив определен как 

```cpp
byte mem[MEMSIZE];
```
![mem_byte.png](https://stepik.org/media/attachments/lesson/312212/mem_byte.png)

Запись и чтение в байт с адресом `a` - это запись и чтение значения из `mem[a]`.

```cpp
// Запись байта val по адресу adr
void b_write (adress adr, byte val)
{
    mem[adr] = val;
}
    
// Возвращает байт по адресу adr
byte b_read (adress adr)
{
    return mem[adr];
}
```

Задание: закомментируйте все тесты, кроме чтения и записи байта, напишите и отладьте функцию работы с байтами.

## `w_read`

Разберемся с функцией чтения слова.

![2b1w.png](https://stepik.org/media/attachments/lesson/312214/2b1w.png)

Пусть в ячейках `mem[a+1]` лежит число `0x0b`, а в `mem[a]` лежит число `0x0a`. Тогда должно прочитаться слово `0x0b0a`. Сформируем слово `w` так:

* запишем в `w` байт из `mem[a+1]`,
* сдвинем в `w` данные влево на 8 бит, чтобы 0x0b встало на свое место,
* допишем в младшие 8 бит байт из `mem[a]`, при этом не трогая остальные биты (они уже готовы),
* на всякий случай обрежем все биты кроме последних 16 и вернем полученное слово.

```cpp
// Возвращает слово по адресу a
word w_read (adress a)
{
    word w = mem[a+1];
    w = w << 8;
    w = w | mem[a];
    return w & 0xFFFF;
}
```
Задание: раскомментируйте тест с записью 2 байт и чтением 1 байта и отладьте код.

## w_write

* Напишите самостоятельно функцию `w_write`. 
* Раскомментируйте все тесты и отладьте код.
* Допишите еще тесты в свой код, если ваши тесты не поймали все ошибки.