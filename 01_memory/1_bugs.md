# Ошибки: загрузка программы в память

lesson = 514364

## Собрание типичных ошибок при написании курсовой

Сначала напишите код. И быть может сделайте ошибку. Это полезно. Грызть гранит науки всяко полезнее для понимания материала, чем жевать манную кашу из готовых решений.

Потом прочтите, почему это ошибка. Обычно при ревью кода преподавателем он вам на нее указывает (этот раздел написан для ленивых преподавателей, которые хотят копировать описание проблемы в github issue).

Разберитесь в предложенном варианте решения.

## Код содержит только примеры приведенные в курсе

И больше ничего.

На каждом этапе дается идея или скелет кода. Его надо дописать.

Отдавать преподавателю на проверку код самого преподавателя немного бессмысленно. 

## Тестирование функций работы с памятью

Давайте посчитаем, хорошо ли вы написали функцию тестирования.

1. есть тесты, если какого-то теста нет, то одна из функций не протестирована полностью:
    * пишем байт, читаем байт,
    * пишем слово, читаем слово,
    * пишем слово, читаем 2 байта,
    * пишем 2 байта, читаем слово

2. Каждый код начинается с нового адреса, данные одного теста не влияют на другой тест.

3. Проверены как положительные, так и отрицательные числа.

4. Вы подумали о тесте на чтение/запись по нечетному адресу. Программа должна падать с assert или как минимум останавливаться.

(Альтернативное мнение: делать адрес ближайшим четным).

Что-то пропущено? Возвращайтесь Доделывайте. И не забудьте про commit + push.

## Магические числа и арфиметические операции

* 256 - плохая константа, 0xFF гораздо лучше.
* `+ - % * /` будете использовать в курсе вычислительной математике. Тут часть курса по архитектуре, используйте побитовые операции.
* будьте параноиками, типы byte и word могут быть больше 8 и 16 бит. Они могут стать знаковыми. Напишите код устойчивым к подобным  изменениям.

## Открываем файл. Нужна диагностика ошибок

```cpp
FILE *fin = fopen(filename, "r"); 
```
Если это все действия при открытии, то лучше перечитайте весь раздел курса про файлы.

* [Перенаправление в командной строке](https://stepik.org/lesson/265319/step/1?unit=246269)
* [fopen](https://stepik.org/lesson/266199/step/1?unit=247155)
* [Обработка ошибок](https://stepik.org/lesson/266213/step/1?unit=247167) - здесь разобрано, почему это ошибка и как нужно написать.

## Имя файла написано в коде или просят ввести с клавиатуры

```cpp
fin = fopen("test.o", "r");
```

Писать в коде `"test.o"` - это не путь джедая. Передайте имя файла в [аргументах командной строки](https://stepik.org/lesson/311876?unit=294366)

Вы работаете в IDE и не знаете как задавать аргументы программы при запуске?

* загуглите где в вашей IDE задаются аргументы команды при запуске.
* если у вас Windows, поставьте wsl (ubuntu console); собирайте и запускайте программу в командной строке.

## Аргументы командной строки

Вы действительно считаете, что для широкораспространенной задачи, которая нужна всем и часто не написали стандартных функций?

[getopt](https://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html)
